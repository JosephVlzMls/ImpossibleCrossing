START_GRAPHIC_MODE MACRO ;320X200 40X25
    PUSH AX
    MOV AH, 00h
    MOV AL, 13h
    INT 10h
    POP AX
ENDM

FINISH_GRAPHIC_MODE MACRO
    PUSH AX
    MOV AH, 00h
    MOV AL, 03h
    INT 10h
    POP AX
ENDM

SET_POSITION_CURSOR MACRO ARG0, ARG1
    PUSH AX
    PUSH BX
    PUSH DX
    MOV DH, ARG1
    MOV DL, ARG0
    MOV AH, 02h
    MOV BH, 0h
    INT 10h
    POP DX
    POP BX
    POP AX
ENDM

GET_POSITION_CURSOR MACRO ARG0
    PUSH BP
    PUSH AX
    PUSH BX
    PUSH CX
    PUSH DX
    MOV BP, SP
    MOV AH, 03h
    MOV BH, 00h
    INT 10h
    MOV [BP+2], DX
    POP DX
    POP CX
    POP BX
    POP AX
    MOV ARG0, [BP+2]
    POP BP
ENDM

READ_KEY MACRO ARG0
    PUSH BP
    PUSH AX
    MOV BP, SP
    MOV AH, 0h
    INT 16h
    MOV [BP+2], AX
    POP AX
    MOV ARG0, BYTE PTR[BP+3]
    POP BP
ENDM

KEY_PRESSED MACRO ARG0
    LOCAL TAG0, TAG1
    PUSH BP
    PUSH AX
    MOV BP, SP
    MOV AH, 01h
    INT 16h
    JNZ TAG0
    MOV AX, [BP]
    JMP TAG1
    TAG0:
    MOV AH, 00h
    INT 16h
    TAG1:
    MOV [BP+2], AX
    POP AX
    MOV ARG0, BYTE PTR[BP+2]
    POP BP
ENDM

PAINT_CHAR MACRO ARG0, ARG1, ARG2, ARG3
    PUSH AX
    PUSH BX
    PUSH CX
    SET_POSITION_CURSOR ARG0, ARG1
    MOV AL, ARG2
    MOV AH, 09h 
    MOV BH, 00h
    MOV BL, ARG3
    MOV CX, 1h
    INT 10h
    POP CX
    POP BX
    POP AX
ENDM

PAINT_STRING MACRO ARG0, ARG1, ARG2, ARG3
    LOCAL TAG0, TAG1
    PUSH SI
    PUSH AX
    PUSH DX
    MOV DL, ARG0
    MOV DH, ARG1
    MOV SI, 0h
    TAG0:
    MOV AH, ARG2[SI]
    CMP AH, 24h
    JE TAG1
    PAINT_CHAR DL, DH, AH, ARG3
    ADD SI, 1h
    ADD DL, 1h
    JMP TAG0
    TAG1:
    POP DX
    POP AX
    POP SI
ENDM

PAINT_BACKGROUND MACRO ARG0
    DRAW_SOLID_RECTANGLE 0, 0, 320, 200, ARG0
ENDM